- name: "zfs: block"
  when: zfs_enabled | bool
  block:
    - name: "zfs: create ZFS dataset for /var/db"
      zfs:
        name: "{{ boot_pool }}/var/db"
        state: present
        extra_zfs_properties:
          canmount: off

    - name: "zfs: create ZFS dataset for /jails"
      zfs:
        name: "{{ boot_pool }}/jails"
        state: present

    - name: "zfs: create ZFS dataset for /usr/local"
      zfs:
        name: "{{ boot_pool }}/usr/local"
        state: present
        extra_zfs_properties:
          canmount: off
